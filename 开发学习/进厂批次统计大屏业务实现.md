# ËøõÂéÇÊâπÊ¨°ÁªüËÆ°Â§ßÂ±è‰∏öÂä°ÂÆûÁé∞ËØ¶Ëß£

## üìã **È°πÁõÆÊ¶ÇËø∞**

Êú¨ÊñáÊ°£ËØ¶ÁªÜ‰ªãÁªç‰∫ÜËøõÂéÇÊâπÊ¨°ÁªüËÆ°Â§ßÂ±èÁöÑ8‰∏™ÂõæË°®‰∏öÂä°ÂÆûÁé∞ÔºåÂåÖÂê´ÂâçÁ´ØEChartsÈÖçÁΩÆ„ÄÅÂêéÁ´ØServiceÈÄªËæë„ÄÅÊï∞ÊçÆÂ∫ìËÆæËÆ°Á≠âÂÆåÊï¥ÊäÄÊúØÊñπÊ°à„ÄÇ

## üéØ **Â§ßÂ±èÂ∏ÉÂ±ÄËÆæËÆ°**

```md
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        ËøõÂéÇÊâπÊ¨°ÁªüËÆ°Â§ßÂ±è                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ÊúàÂ∫¶ÊâπÊ¨°   ‚îÇ  Áâ©ÊñôÁ±ªÂûã   ‚îÇ  ‰æõÂ∫îÂïÜÊéíË°å ‚îÇ      Âà∑Êñ∞Áä∂ÊÄÅÊ†è          ‚îÇ
‚îÇ  Êü±Áä∂Âõæ     ‚îÇ  È•ºÂõæ       ‚îÇ  Ê®™ÂêëÊü±Áä∂Âõæ ‚îÇ                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ËøõÂéÇË∂ãÂäø   ‚îÇ  Ë¥®ÈáèÁä∂ÊÄÅ   ‚îÇ  Êï∞ÊçÆÁ≠õÈÄâ   ‚îÇ                         ‚îÇ
‚îÇ  ÊäòÁ∫øÂõæ     ‚îÇ  È•ºÂõæ       ‚îÇ  Êó•ÊúüÈÄâÊã©   ‚îÇ                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ÊâπÊ¨°ËØ¶ÊÉÖ   ‚îÇ  ÂºÇÂ∏∏ÁªüËÆ°   ‚îÇ  ÂÆûÊó∂ÁõëÊéß   ‚îÇ                         ‚îÇ
‚îÇ  Ê∑∑ÂêàÂõæ     ‚îÇ  È•ºÂõæ       ‚îÇ  ‰ª™Ë°®Áõò     ‚îÇ                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üìä **ÂõæË°®ËØ¶ÁªÜÂÆûÁé∞**

### 1. **ÊúàÂ∫¶ËøõÂéÇÊâπÊ¨°ÁªüËÆ°ÔºàÊü±Áä∂ÂõæÔºâ**

**‰∏öÂä°ÊèèËø∞Ôºö** ÁªüËÆ°ÊåáÂÆöÂπ¥‰ªΩÂêÑÊúà‰ªΩÁöÑËøõÂéÇÊâπÊ¨°Êï∞ÈáèÔºå‰ª•Êü±Áä∂ÂõæÂΩ¢ÂºèÂ±ïÁ§∫ÊúàÂ∫¶ÂèòÂåñË∂ãÂäø„ÄÇ

#### 1.1 ÂâçÁ´ØÂÆûÁé∞

```javascript
// Êï∞ÊçÆÂä†ËΩΩ
const loadBatchCountData = async () => {
  try {
    loading.batchCount = true;
    error.batchCount = '';
    
    const data = await callService('mmrejc01_inq', { 
      QUERY_YEAR: propstime.value.substring(0, 4) 
    });
    
    chartData.monthlyBatchCount = data || [];
    await nextTick();
    initBatchCountChart();
  } catch (err) {
    error.batchCount = err.message || 'Ëé∑ÂèñÊâπÊ¨°ÁªüËÆ°Êï∞ÊçÆÂ§±Ë¥•';
  } finally {
    loading.batchCount = false;
  }
};

// ÂõæË°®ÂàùÂßãÂåñ
const initBatchCountChart = () => {
  const myChart = echarts.init(chartDom);
  
  const option = {
    grid: {
      left: '10%', right: '5%', bottom: '15%', top: '10%'
    },
    xAxis: {
      type: 'category',
      data: chartData.monthlyBatchCount.map(item => item.MONTH_NAME),
      axisLabel: { color: '#a4c4f7', fontSize: 10 }
    },
    yAxis: {
      type: 'value',
      axisLabel: { color: '#a4c4f7', fontSize: 10 }
    },
    series: [{
      data: chartData.monthlyBatchCount.map(item => item.BATCH_COUNT),
      type: 'bar',
      itemStyle: {
        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
          { offset: 0, color: '#00f4fe' },
          { offset: 1, color: '#3b82f6' }
        ])
      },
      barWidth: '60%'
    }]
  };
  
  myChart.setOption(option);
};
```

#### 1.2 ÂêéÁ´ØServiceÂÆûÁé∞

```cpp
// mmrejc01_inq.cpp
int f_mmrejc01_inq(EIClass* bcls_rec, EIClass* bcls_ret, CDbConnection* conn)
{
    // Ëé∑ÂèñÊü•ËØ¢Âπ¥‰ªΩ
    CString QUERY_YEAR = "";
    if (bcls_rec->Tables[0].Columns.Contains("QUERY_YEAR"))
        QUERY_YEAR = bcls_rec->Tables[0].Rows[0]["QUERY_YEAR"].ToString().Trim();
    
    if (QUERY_YEAR.IsEmpty()) {
        QUERY_YEAR = CDateTime::Now().ToString("yyyy");
    }
    
    // SQLÊü•ËØ¢
    CString sql = R"(
        SELECT 
            TO_CHAR(TO_DATE(SUBSTR(t.IN_DATE, 1, 6), 'YYYYMM'), 'MM') || 'Êúà' AS MONTH_NAME,
            COUNT(*) AS BATCH_COUNT
        FROM TMMREJC_BATCH t 
        WHERE 1=1 
            AND COMPANY_CODE = @COMPANY_CODE
            AND SUBSTR(t.IN_DATE, 1, 4) = @QUERY_YEAR
            AND t.DELETE_FLAG = '0'
        GROUP BY SUBSTR(t.IN_DATE, 1, 6)
        ORDER BY SUBSTR(t.IN_DATE, 1, 6)
    )";
    
    // ÊâßË°åÊü•ËØ¢Âπ∂ËøîÂõûÁªìÊûú
    comm_inq.Parameters.Set("COMPANY_CODE", s.company_code);
    comm_inq.Parameters.Set("QUERY_YEAR", QUERY_YEAR);
    affectRow = comm_inq.ExecuteQuery(bcls_ret->Tables[0]);
    
    return doFlag;
}
```

**Êï∞ÊçÆÊ†ºÂºèÔºö**

```json
{
  "data": [
    {"MONTH_NAME": "01Êúà", "BATCH_COUNT": 125},
    {"MONTH_NAME": "02Êúà", "BATCH_COUNT": 98},
    {"MONTH_NAME": "03Êúà", "BATCH_COUNT": 156}
  ]
}
```

---

### 2. **Áâ©ÊñôÁ±ªÂûãÂàÜÂ∏ÉÔºàÈ•ºÂõæÔºâ**

**‰∏öÂä°ÊèèËø∞Ôºö** Â±ïÁ§∫ÊåáÂÆöÊúà‰ªΩÂêÑÁâ©ÊñôÁ±ªÂûãÁöÑËøõÂéÇÊâπÊ¨°ÂàÜÂ∏ÉÊØî‰æã„ÄÇ

#### 2.1 ÂâçÁ´ØÂÆûÁé∞

```javascript
const initMaterialPieChart = () => {
  const myChart = echarts.init(chartDom);
  
  const option = {
    tooltip: {
      trigger: 'item',
      formatter: '{b}: {c}% ({d}%)'
    },
    legend: {
      orient: 'vertical',
      left: 'left',
      textStyle: { color: '#a4c4f7', fontSize: 10 }
    },
    series: [{
      name: 'Áâ©ÊñôÁ±ªÂûã',
      type: 'pie',
      radius: '70%',
      center: ['60%', '50%'],
      data: chartData.materialTypes.map(item => ({
        name: item.MAT_TYPE_NAME,
        value: item.PERCENTAGE,
        itemStyle: { color: item.COLOR }
      })),
      label: { color: '#a4c4f7', fontSize: 10 }
    }]
  };
  
  myChart.setOption(option);
};
```

#### 2.2 ÂêéÁ´ØServiceÂÆûÁé∞

```cpp
// mmrejc02_inq.cpp
CString sql = R"(
    SELECT 
        m.MAT_TYPE_CNAME AS MAT_TYPE_NAME,
        ROUND(COUNT(*) * 100.0 / SUM(COUNT(*)) OVER(), 2) AS PERCENTAGE,
        CASE 
            WHEN m.MAT_TYPE_CODE = '10' THEN '#00f4fe'  -- Â∫üÈí¢
            WHEN m.MAT_TYPE_CODE = '20' THEN '#3b82f6'  -- ÂêàÈáë
            WHEN m.MAT_TYPE_CODE = '30' THEN '#8b5cf6'  -- ÂâØÂéüÊñô
            ELSE '#6b7280'
        END AS COLOR
    FROM TMMREJC_BATCH t
    LEFT JOIN TYMRE20 m ON t.MAT_TYPE_CODE = m.MAT_TYPE_CODE 
    WHERE t.COMPANY_CODE = @COMPANY_CODE
        AND SUBSTR(t.IN_DATE, 1, 6) = @QUERY_MONTH
        AND t.DELETE_FLAG = '0'
    GROUP BY m.MAT_TYPE_CODE, m.MAT_TYPE_CNAME
    ORDER BY COUNT(*) DESC
)";
```

**Êï∞ÊçÆÊ†ºÂºèÔºö**

```json
{
  "data": [
    {"MAT_TYPE_NAME": "Â∫üÈí¢", "PERCENTAGE": 45.5, "COLOR": "#00f4fe"},
    {"MAT_TYPE_NAME": "ÂêàÈáë", "PERCENTAGE": 32.1, "COLOR": "#3b82f6"},
    {"MAT_TYPE_NAME": "ÂâØÂéüÊñô", "PERCENTAGE": 22.4, "COLOR": "#8b5cf6"}
  ]
}
```

---

### 3. **‰æõÂ∫îÂïÜÊéíË°åTOP5ÔºàÊ®™ÂêëÊü±Áä∂ÂõæÔºâ**

**‰∏öÂä°ÊèèËø∞Ôºö** Â±ïÁ§∫ÊåáÂÆöÊúà‰ªΩ‰æõÂ∫îÂïÜËøõÂéÇÊâπÊ¨°Êï∞ÈáèÊéíË°åÊ¶úÂâç5Âêç„ÄÇ

#### 3.1 ÂâçÁ´ØÂÆûÁé∞

```javascript
const initSupplierRankChart = () => {
  const myChart = echarts.init(chartDom);
  
  const option = {
    grid: {
      left: '20%', right: '5%', bottom: '10%', top: '10%'
    },
    xAxis: {
      type: 'value',
      axisLabel: { color: '#a4c4f7', fontSize: 10 }
    },
    yAxis: {
      type: 'category',
      data: chartData.supplierRank.map(item => item.SUPPLIER_NAME),
      axisLabel: { color: '#a4c4f7', fontSize: 10 }
    },
    series: [{
      data: chartData.supplierRank.map(item => item.BATCH_COUNT),
      type: 'bar',
      itemStyle: {
        color: new echarts.graphic.LinearGradient(1, 0, 0, 0, [
          { offset: 0, color: '#00f4fe' },
          { offset: 1, color: '#3b82f6' }
        ])
      },
      barWidth: '60%'
    }]
  };
  
  myChart.setOption(option);
};
```

#### 3.2 ÂêéÁ´ØServiceÂÆûÁé∞

```cpp
// mmrejc03_inq.cpp
CString sql = R"(
    SELECT * FROM (
        SELECT 
            NVL(s.SUPPLIER_CNAME, t.SUPPLIER_CODE) AS SUPPLIER_NAME,
            COUNT(*) AS BATCH_COUNT,
            ROW_NUMBER() OVER (ORDER BY COUNT(*) DESC) AS RN
        FROM TMMREJC_BATCH t
        LEFT JOIN TYMRE30 s ON t.SUPPLIER_CODE = s.SUPPLIER_CODE 
        WHERE t.COMPANY_CODE = @COMPANY_CODE
            AND SUBSTR(t.IN_DATE, 1, 6) = @QUERY_MONTH
            AND t.DELETE_FLAG = '0'
        GROUP BY t.SUPPLIER_CODE, s.SUPPLIER_CNAME
    ) ranked
    WHERE RN <= @LIMIT_COUNT
)";
```

**Êï∞ÊçÆÊ†ºÂºèÔºö**

```json
{
  "data": [
    {"SUPPLIER_NAME": "ÂÆùÈí¢‰æõÂ∫îÂïÜ", "BATCH_COUNT": 89},
    {"SUPPLIER_NAME": "È¶ñÈí¢‰æõÂ∫îÂïÜ", "BATCH_COUNT": 76},
    {"SUPPLIER_NAME": "ÂÆâÈí¢‰æõÂ∫îÂïÜ", "BATCH_COUNT": 65}
  ]
}
```

---

### 4. **ËøõÂéÇË∂ãÂäøÂàÜÊûêÔºàÊäòÁ∫øÂõæÔºâ**

**‰∏öÂä°ÊèèËø∞Ôºö** Â±ïÁ§∫Ëøë6‰∏™ÊúàËøõÂéÇÊâπÊ¨°Êï∞ÈáèÁöÑÂèòÂåñË∂ãÂäø„ÄÇ

#### 4.1 ÂâçÁ´ØÂÆûÁé∞

```javascript
const initTrendLineChart = () => {
  const myChart = echarts.init(chartDom);
  
  const option = {
    grid: {
      left: '10%', right: '5%', bottom: '15%', top: '10%'
    },
    xAxis: {
      type: 'category',
      data: chartData.trendData.map(item => item.MONTH_NAME),
      axisLabel: { color: '#a4c4f7', fontSize: 10 }
    },
    yAxis: {
      type: 'value',
      axisLabel: { color: '#a4c4f7', fontSize: 10 }
    },
    series: [{
      data: chartData.trendData.map(item => item.BATCH_COUNT),
      type: 'line',
      smooth: true,
      lineStyle: { color: '#00f4fe', width: 2 },
      itemStyle: { color: '#00f4fe' },
      areaStyle: {
        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
          { offset: 0, color: 'rgba(0, 244, 254, 0.3)' },
          { offset: 1, color: 'rgba(0, 244, 254, 0.1)' }
        ])
      }
    }]
  };
  
  myChart.setOption(option);
};
```

#### 4.2 ÂêéÁ´ØServiceÂÆûÁé∞

```cpp
// mmrejc04_inq.cpp
CString sql = R"(
    SELECT 
        TO_CHAR(TO_DATE(month_key, 'YYYYMM'), 'MM') || 'Êúà' AS MONTH_NAME,
        NVL(batch_count, 0) AS BATCH_COUNT
    FROM (
        SELECT 
            TO_CHAR(ADD_MONTHS(SYSDATE, -LEVEL+1), 'YYYYMM') AS month_key
        FROM DUAL 
        CONNECT BY LEVEL <= @MONTHS_COUNT
    ) months
    LEFT JOIN (
        SELECT 
            SUBSTR(t.IN_DATE, 1, 6) AS month_key,
            COUNT(*) AS batch_count
        FROM TMMREJC_BATCH t
        WHERE t.COMPANY_CODE = @COMPANY_CODE
            AND t.DELETE_FLAG = '0'
        GROUP BY SUBSTR(t.IN_DATE, 1, 6)
    ) data ON months.month_key = data.month_key
    ORDER BY months.month_key
)";
```

---

### 5. **Ë¥®ÈáèÁä∂ÊÄÅÁªüËÆ°ÔºàÈ•ºÂõæÔºâ**

**‰∏öÂä°ÊèèËø∞Ôºö** Â±ïÁ§∫ÊåáÂÆöÊúà‰ªΩÊâπÊ¨°Ë¥®ÈáèÁä∂ÊÄÅÔºàÂêàÊ†º/‰∏çÂêàÊ†º/ÂæÖÊ£ÄÔºâÁöÑÂàÜÂ∏ÉÊÉÖÂÜµ„ÄÇ

#### 5.1 ÂâçÁ´ØÂÆûÁé∞

```javascript
const initQualityStatusChart = () => {
  const myChart = echarts.init(chartDom);
  
  const option = {
    tooltip: {
      trigger: 'item',
      formatter: '{b}: {c}% ({d}%)'
    },
    legend: {
      orient: 'vertical',
      left: 'left',
      textStyle: { color: '#a4c4f7', fontSize: 10 }
    },
    series: [{
      name: 'Ë¥®ÈáèÁä∂ÊÄÅ',
      type: 'pie',
      radius: '70%',
      center: ['60%', '50%'],
      data: chartData.qualityStatus.map(item => ({
        name: item.STATUS_NAME,
        value: item.PERCENTAGE,
        itemStyle: { color: item.COLOR }
      })),
      label: { color: '#a4c4f7', fontSize: 10 }
    }]
  };
  
  myChart.setOption(option);
};
```

#### 5.2 ÂêéÁ´ØServiceÂÆûÁé∞

```cpp
// mmrejc05_inq.cpp
CString sql = R"(
    SELECT 
        CASE 
            WHEN t.QUALITY_STATUS = '1' THEN 'ÂêàÊ†º'
            WHEN t.QUALITY_STATUS = '2' THEN '‰∏çÂêàÊ†º'
            WHEN t.QUALITY_STATUS = '0' OR t.QUALITY_STATUS IS NULL THEN 'ÂæÖÊ£Ä'
            ELSE 'ÂÖ∂‰ªñ'
        END AS STATUS_NAME,
        ROUND(COUNT(*) * 100.0 / SUM(COUNT(*)) OVER(), 2) AS PERCENTAGE,
        CASE 
            WHEN t.QUALITY_STATUS = '1' THEN '#10b981'  -- ÂêàÊ†º-ÁªøËâ≤
            WHEN t.QUALITY_STATUS = '2' THEN '#ef4444'  -- ‰∏çÂêàÊ†º-Á∫¢Ëâ≤
            ELSE '#f59e0b'  -- ÂæÖÊ£Ä-ÈªÑËâ≤
        END AS COLOR
    FROM TMMREJC_BATCH t
    WHERE t.COMPANY_CODE = @COMPANY_CODE
        AND SUBSTR(t.IN_DATE, 1, 6) = @QUERY_MONTH
        AND t.DELETE_FLAG = '0'
    GROUP BY t.QUALITY_STATUS
    ORDER BY COUNT(*) DESC
)";
```

---

### 6. **ÊâπÊ¨°ËØ¶ÊÉÖÊï∞ÊçÆÔºàÊ∑∑ÂêàÂõæË°®Ôºâ**

**‰∏öÂä°ÊèèËø∞Ôºö** Â±ïÁ§∫ÊåáÂÆöÊúà‰ªΩÂêÑÁâ©ÊñôÁ±ªÂûãÁöÑÊâπÊ¨°Êï∞ÈáèÂíåÊÄªÈáçÈáèÔºå‰ΩøÁî®Êü±Áä∂Âõæ+ÊäòÁ∫øÂõæÁªÑÂêà„ÄÇ

#### 6.1 ÂâçÁ´ØÂÆûÁé∞

```javascript
const initBatchDetailChart = () => {
  const myChart = echarts.init(chartDom);
  
  const option = {
    grid: {
      left: '10%', right: '5%', bottom: '15%', top: '10%'
    },
    xAxis: {
      type: 'category',
      data: chartData.batchDetail.map(item => item.MAT_TYPE_NAME),
      axisLabel: { color: '#a4c4f7', fontSize: 10 }
    },
    yAxis: [
      {
        type: 'value',
        name: 'ÊâπÊ¨°Êï∞',
        axisLabel: { color: '#a4c4f7', fontSize: 10 }
      },
      {
        type: 'value',
        name: 'ÈáçÈáè(Âê®)',
        axisLabel: { color: '#a4c4f7', fontSize: 10 }
      }
    ],
    series: [
      {
        name: 'ÊâπÊ¨°Êï∞',
        type: 'bar',
        data: chartData.batchDetail.map(item => item.BATCH_COUNT),
        itemStyle: { color: '#00f4fe' }
      },
      {
        name: 'ÈáçÈáè',
        type: 'line',
        yAxisIndex: 1,
        data: chartData.batchDetail.map(item => item.TOTAL_WEIGHT),
        itemStyle: { color: '#3b82f6' }
      }
    ]
  };
  
  myChart.setOption(option);
};
```

#### 6.2 ÂêéÁ´ØServiceÂÆûÁé∞

```cpp
// mmrejc06_inq.cpp
CString sql = R"(
    SELECT 
        m.MAT_TYPE_CNAME AS MAT_TYPE_NAME,
        COUNT(*) AS BATCH_COUNT,
        ROUND(SUM(NVL(t.BATCH_WEIGHT, 0)), 2) AS TOTAL_WEIGHT
    FROM TMMREJC_BATCH t
    LEFT JOIN TYMRE20 m ON t.MAT_TYPE_CODE = m.MAT_TYPE_CODE 
    WHERE t.COMPANY_CODE = @COMPANY_CODE
        AND SUBSTR(t.IN_DATE, 1, 6) = @QUERY_MONTH
        AND t.DELETE_FLAG = '0'
    GROUP BY m.MAT_TYPE_CODE, m.MAT_TYPE_CNAME
    ORDER BY COUNT(*) DESC
)";
```

---

### 7. **ÂºÇÂ∏∏ÊâπÊ¨°ÁªüËÆ°ÔºàÈ•ºÂõæÔºâ**

**‰∏öÂä°ÊèèËø∞Ôºö** Â±ïÁ§∫ÊåáÂÆöÊúà‰ªΩÂºÇÂ∏∏ÊâπÊ¨°ÁöÑÁ±ªÂûãÂàÜÂ∏ÉÊÉÖÂÜµ„ÄÇ

#### 7.1 ÂâçÁ´ØÂÆûÁé∞

```javascript
const initExceptionTypeChart = () => {
  const myChart = echarts.init(chartDom);
  
  const option = {
    tooltip: {
      trigger: 'item',
      formatter: '{b}: {c}% ({d}%)'
    },
    legend: {
      orient: 'vertical',
      left: 'left',
      textStyle: { color: '#a4c4f7', fontSize: 10 }
    },
    series: [{
      name: 'ÂºÇÂ∏∏Á±ªÂûã',
      type: 'pie',
      radius: '70%',
      center: ['60%', '50%'],
      data: chartData.exceptionTypes.map(item => ({
        name: item.EXCEPTION_TYPE_NAME,
        value: item.PERCENTAGE,
        itemStyle: { color: item.COLOR }
      })),
      label: { color: '#a4c4f7', fontSize: 10 }
    }]
  };
  
  myChart.setOption(option);
};
```

#### 7.2 ÂêéÁ´ØServiceÂÆûÁé∞

```cpp
// mmrejc07_inq.cpp
CString sql = R"(
    SELECT 
        CASE 
            WHEN t.EXCEPTION_TYPE = '1' THEN 'Ë¥®ÈáèÂºÇÂ∏∏'
            WHEN t.EXCEPTION_TYPE = '2' THEN 'Êï∞ÈáèÂºÇÂ∏∏'
            WHEN t.EXCEPTION_TYPE = '3' THEN 'ÂåÖË£ÖÂºÇÂ∏∏'
            WHEN t.EXCEPTION_TYPE = '4' THEN 'ËøêËæìÂºÇÂ∏∏'
            WHEN t.EXCEPTION_TYPE = '5' THEN 'ÂÖ∂‰ªñÂºÇÂ∏∏'
            ELSE 'Êú™Áü•ÂºÇÂ∏∏'
        END AS EXCEPTION_TYPE_NAME,
        ROUND(COUNT(*) * 100.0 / SUM(COUNT(*)) OVER(), 2) AS PERCENTAGE,
        CASE 
            WHEN t.EXCEPTION_TYPE = '1' THEN '#ef4444'  -- Ë¥®ÈáèÂºÇÂ∏∏-Á∫¢Ëâ≤
            WHEN t.EXCEPTION_TYPE = '2' THEN '#f59e0b'  -- Êï∞ÈáèÂºÇÂ∏∏-ÈªÑËâ≤
            WHEN t.EXCEPTION_TYPE = '3' THEN '#3b82f6'  -- ÂåÖË£ÖÂºÇÂ∏∏-ËìùËâ≤
            WHEN t.EXCEPTION_TYPE = '4' THEN '#8b5cf6'  -- ËøêËæìÂºÇÂ∏∏-Á¥´Ëâ≤
            WHEN t.EXCEPTION_TYPE = '5' THEN '#10b981'  -- ÂÖ∂‰ªñÂºÇÂ∏∏-ÁªøËâ≤
            ELSE '#6b7280'
        END AS COLOR
    FROM TMMREJC_BATCH t
    WHERE t.COMPANY_CODE = @COMPANY_CODE
        AND SUBSTR(t.IN_DATE, 1, 6) = @QUERY_MONTH
        AND t.DELETE_FLAG = '0'
        AND t.EXCEPTION_TYPE IS NOT NULL
    GROUP BY t.EXCEPTION_TYPE
    ORDER BY COUNT(*) DESC
)";
```

---

### 8. **ÂÆûÊó∂ÁõëÊéßÔºà‰ª™Ë°®ÁõòÔºâ**

**‰∏öÂä°ÊèèËø∞Ôºö** Â±ïÁ§∫‰ªäÊó•ËøõÂéÇÊâπÊ¨°ÁöÑÂÆûÊó∂Â§ÑÁêÜÁä∂ÊÄÅÔºå‰ª•‰ª™Ë°®ÁõòÂΩ¢ÂºèÊòæÁ§∫ÂÆåÊàêÁéá„ÄÇ

#### 8.1 ÂâçÁ´ØÂÆûÁé∞

```javascript
const initRealtimeStatusChart = () => {
  const myChart = echarts.init(chartDom);
  
  const completionRate = Math.round(
    (chartData.realtimeStatus.COMPLETED_COUNT / chartData.realtimeStatus.TOTAL_COUNT) * 100
  );
  
  const option = {
    series: [{
      name: 'ÂÆåÊàêÁéá',
      type: 'gauge',
      progress: { show: true, width: 8 },
      axisLine: {
        lineStyle: {
          width: 8,
          color: [[1, 'rgba(0, 244, 254, 0.3)']]
        }
      },
      axisTick: { show: false },
      splitLine: { show: false },
      axisLabel: { color: '#a4c4f7', fontSize: 10 },
      pointer: { show: false },
      title: { show: false },
      detail: {
        valueAnimation: true,
        fontSize: 20,
        color: '#00f4fe',
        formatter: '{value}%'
      },
      data: [{
        value: completionRate,
        itemStyle: { color: '#00f4fe' }
      }]
    }]
  };
  
  myChart.setOption(option);
};
```

#### 8.2 ÂêéÁ´ØServiceÂÆûÁé∞

```cpp
// mmrejc08_inq.cpp
CString sql = R"(
    SELECT 
        COUNT(*) AS TOTAL_COUNT,
        SUM(CASE WHEN t.PROCESS_STATUS = '1' THEN 1 ELSE 0 END) AS COMPLETED_COUNT,
        SUM(CASE WHEN t.PROCESS_STATUS = '0' OR t.PROCESS_STATUS IS NULL THEN 1 ELSE 0 END) AS PENDING_COUNT,
        SUM(CASE WHEN t.EXCEPTION_TYPE IS NOT NULL AND t.EXCEPTION_TYPE != '' THEN 1 ELSE 0 END) AS EXCEPTION_COUNT,
        TO_CHAR(SYSDATE, 'YYYY-MM-DD HH24:MI:SS') AS CURRENT_TIME
    FROM TMMREJC_BATCH t
    WHERE t.COMPANY_CODE = @COMPANY_CODE
        AND SUBSTR(t.IN_DATE, 1, 8) = TO_CHAR(SYSDATE, 'YYYYMMDD')
        AND t.DELETE_FLAG = '0'
)";
```

**Êï∞ÊçÆÊ†ºÂºèÔºö**

```json
{
  "data": [{
    "TOTAL_COUNT": 156,
    "COMPLETED_COUNT": 142,
    "PENDING_COUNT": 14,
    "EXCEPTION_COUNT": 3,
    "CURRENT_TIME": "2025-07-07 14:30:25"
  }]
}
```

---

## üóÑÔ∏è **Êï∞ÊçÆÂ∫ìËÆæËÆ°**

### Ê†∏ÂøÉË°®ÁªìÊûÑ

```sql
-- ËøõÂéÇÊâπÊ¨°‰∏ªË°®
CREATE TABLE TMMREJC_BATCH (
    COMPANY_CODE VARCHAR2(10) NOT NULL,         -- ÂÖ¨Âè∏‰ª£Á†Å
    BATCH_ID VARCHAR2(20) NOT NULL,             -- ÊâπÊ¨°ID
    BATCH_NO VARCHAR2(50) NOT NULL,             -- ÊâπÊ¨°Âè∑
    IN_DATE VARCHAR2(8) NOT NULL,               -- ËøõÂéÇÊó•Êúü(YYYYMMDD)
    IN_TIME VARCHAR2(6),                        -- ËøõÂéÇÊó∂Èó¥(HHMMSS)
    MAT_TYPE_CODE VARCHAR2(10),                 -- Áâ©ÊñôÁ±ªÂûã‰ª£Á†Å
    SUPPLIER_CODE VARCHAR2(20),                 -- ‰æõÂ∫îÂïÜ‰ª£Á†Å
    BATCH_WEIGHT NUMBER(12,2),                  -- ÊâπÊ¨°ÈáçÈáè
    QUALITY_STATUS VARCHAR2(1),                 -- Ë¥®ÈáèÁä∂ÊÄÅ(0-ÂæÖÊ£Ä 1-ÂêàÊ†º 2-‰∏çÂêàÊ†º)
    PROCESS_STATUS VARCHAR2(1),                 -- Â§ÑÁêÜÁä∂ÊÄÅ(0-Êú™Â§ÑÁêÜ 1-Â∑≤Â§ÑÁêÜ)
    EXCEPTION_TYPE VARCHAR2(1),                 -- ÂºÇÂ∏∏Á±ªÂûã(1-Ë¥®ÈáèÂºÇÂ∏∏ 2-Êï∞ÈáèÂºÇÂ∏∏ 3-ÂåÖË£ÖÂºÇÂ∏∏ 4-ËøêËæìÂºÇÂ∏∏ 5-ÂÖ∂‰ªñÂºÇÂ∏∏)
    EXCEPTION_REMARK VARCHAR2(500),             -- ÂºÇÂ∏∏Â§áÊ≥®
    DELETE_FLAG VARCHAR2(1) DEFAULT '0',        -- Âà†Èô§Ê†áÂøó
    PRIMARY KEY (COMPANY_CODE, BATCH_ID)
);

-- ÂÖ≥ÈîÆÁ¥¢Âºï
CREATE INDEX IDX_TMMREJC_BATCH_01 ON TMMREJC_BATCH(COMPANY_CODE, IN_DATE, DELETE_FLAG);
CREATE INDEX IDX_TMMREJC_BATCH_02 ON TMMREJC_BATCH(COMPANY_CODE, MAT_TYPE_CODE, DELETE_FLAG);
CREATE INDEX IDX_TMMREJC_BATCH_03 ON TMMREJC_BATCH(COMPANY_CODE, SUPPLIER_CODE, DELETE_FLAG);
```

### ÂÖ≥ËÅîË°®

- **TYMRE20**: Áâ©ÊñôÁ±ªÂûã‰∏ªÊ°£Ë°®
- **TYMRE30**: ‰æõÂ∫îÂïÜ‰∏ªÊ°£Ë°®

---

## üîß **ÊäÄÊúØÊû∂ÊûÑ**

### ÂâçÁ´ØÊäÄÊúØÊ†à

- **Vue 3**: ÁªÑ‰ª∂ÂåñÂºÄÂèë
- **TypeScript**: Á±ªÂûãÂÆâÂÖ®
- **ECharts 5**: ÂõæË°®Ê∏≤Êüì
- **Element Plus**: UIÁªÑ‰ª∂
- **EI/ERÊ°ÜÊû∂**: Êï∞ÊçÆÈÄö‰ø°

### ÂêéÁ´ØÊäÄÊúØÊ†à

- **C++**: ÊúçÂä°Á´ØÂºÄÂèë
- **OracleÊï∞ÊçÆÂ∫ì**: Êï∞ÊçÆÂ≠òÂÇ®
- **EIClass**: Êï∞ÊçÆ‰º†ËæìÊ†ºÂºè
- **ÊúçÂä°ÂåñÊû∂ÊûÑ**: Ê®°ÂùóÂåñËÆæËÆ°

### Êï∞ÊçÆÊµÅÁ®ã

```sql
ÂâçÁ´ØVueÁªÑ‰ª∂ ‚Üí ER.FormHelper ‚Üí EI.EIInfo ‚Üí C++Service ‚Üí OracleÊï∞ÊçÆÂ∫ì
     ‚Üì                                                           ‚Üë
EChartsÂõæË°® ‚Üê Êï∞ÊçÆÂ§ÑÁêÜ ‚Üê JSONÊ†ºÂºè ‚Üê EIClassÊ†ºÂºè ‚Üê SQLÊü•ËØ¢ÁªìÊûú
```

---

## üöÄ **ÊÄßËÉΩ‰ºòÂåñ**

### 1. **Êï∞ÊçÆÂ∫ì‰ºòÂåñ**

- ÂêàÁêÜËÆæËÆ°Á¥¢ÂºïÊèêÂçáÊü•ËØ¢ÈÄüÂ∫¶
- ‰ΩøÁî®ÂàÜÂå∫Ë°®Â§ÑÁêÜÂ§ßÊï∞ÊçÆÈáè
- ÈÅøÂÖçÂÖ®Ë°®Êâ´ÊèèÔºå‰ΩøÁî®Êù°‰ª∂ËøáÊª§

### 2. **ÂâçÁ´Ø‰ºòÂåñ**

- ÂõæË°®ÊåâÈúÄÂä†ËΩΩÔºåÈÅøÂÖçÈáçÂ§çÊ∏≤Êüì
- ‰ΩøÁî®Èò≤ÊäñÊú∫Âà∂ÂáèÂ∞ëÈ¢ëÁπÅÂà∑Êñ∞
- ÂêàÁêÜ‰ΩøÁî®ÁºìÂ≠òÊú∫Âà∂

### 3. **Êé•Âè£‰ºòÂåñ**

- Âπ∂ÂèëË∞ÉÁî®Â§ö‰∏™Êé•Âè£
- ÂêàÁêÜËÆæÁΩÆË∂ÖÊó∂Êó∂Èó¥
- Áªü‰∏ÄÈîôËØØÂ§ÑÁêÜÊú∫Âà∂

---

## üìù **ÂºÄÂèëÁªèÈ™åÊÄªÁªì**

### 1. **‰∏öÂä°ÁêÜËß£**

- Ê∑±ÂÖ•ÁêÜËß£ËøõÂéÇ‰∏öÂä°ÊµÅÁ®ã
- ÊòéÁ°ÆÂêÑ‰∏™ÁªüËÆ°ÊåáÊ†áÁöÑ‰∏öÂä°Âê´‰πâ
- Á°Æ‰øùÊï∞ÊçÆÁöÑÂáÜÁ°ÆÊÄßÂíåÊó∂ÊïàÊÄß

### 2. **ÊäÄÊúØÈÄâÂûã**

- EChartsÈÄÇÂêàÂ§çÊùÇÁöÑÊï∞ÊçÆÂèØËßÜÂåñÈúÄÊ±Ç
- Vue3ÁöÑÁªÑÂêàÂºèAPIÊèêÈ´ò‰ª£Á†ÅÂ§çÁî®ÊÄß
- TypeScriptÂ¢ûÂº∫‰ª£Á†ÅÂÅ•Â£ÆÊÄß

### 3. **ÂºÄÂèëËßÑËåÉ**

- Áªü‰∏ÄÁöÑÂëΩÂêçËßÑËåÉ
- ÂÆåÂñÑÁöÑÈîôËØØÂ§ÑÁêÜ
- ËØ¶ÁªÜÁöÑ‰ª£Á†ÅÊ≥®Èáä

### 4. **ÊµãËØïÁ≠ñÁï•**

- ÂçïÂÖÉÊµãËØïË¶ÜÁõñÊ†∏ÂøÉ‰∏öÂä°ÈÄªËæë
- ÈõÜÊàêÊµãËØïÈ™åËØÅÂâçÂêéÁ´Ø‰∫§‰∫í
- ÊÄßËÉΩÊµãËØïÁ°Æ‰øùÁ≥ªÁªüÁ®≥ÂÆöÊÄß

---

## üìû **ÊÄªÁªì**

ÈÄöËøáÊú¨È°πÁõÆÁöÑÂÆûË∑µÔºåÊàë‰ª¨ÂÆåÊàê‰∫Ü‰∏Ä‰∏™ÂÆåÊï¥ÁöÑËøõÂéÇÊâπÊ¨°ÁªüËÆ°Â§ßÂ±èÁ≥ªÁªüÔºåÂåÖÂê´Ôºö

1. **8‰∏™‰∏öÂä°ÂõæË°®**ÔºöË¶ÜÁõñÊâπÊ¨°ÁªüËÆ°„ÄÅÁ±ªÂûãÂàÜÂ∏É„ÄÅ‰æõÂ∫îÂïÜÊéíË°å„ÄÅË∂ãÂäøÂàÜÊûê„ÄÅË¥®ÈáèÁõëÊéßÁ≠âÊ†∏ÂøÉÊåáÊ†á
2. **ÂÆåÊï¥ÁöÑÊäÄÊúØÊ†à**ÔºöÂâçÁ´ØVue3+ECharts+ÂêéÁ´ØC++Service+OracleÊï∞ÊçÆÂ∫ì
3. **ÂÆûÊó∂Êï∞ÊçÆÊõ¥Êñ∞**ÔºöËá™Âä®Âà∑Êñ∞Êú∫Âà∂‰øùËØÅÊï∞ÊçÆÁöÑÊó∂ÊïàÊÄß
4. **ËâØÂ•ΩÁöÑÁî®Êà∑‰ΩìÈ™å**ÔºöÂä†ËΩΩÁä∂ÊÄÅ„ÄÅÈîôËØØÊèêÁ§∫„ÄÅÂìçÂ∫îÂºèËÆæËÆ°

Ëøô‰∏™È°πÁõÆÂæàÂ•ΩÂú∞Â±ïÁ§∫‰∫ÜÂ¶Ç‰ΩïÂ∞ÜÂ§çÊùÇÁöÑ‰∏öÂä°ÈúÄÊ±ÇËΩ¨Âåñ‰∏∫ÂèØËßÜÂåñÁöÑÊï∞ÊçÆÂ§ßÂ±èÔºå‰∏∫‰ºÅ‰∏öÂÜ≥Á≠ñÊèê‰æõ‰∫ÜÊúâÂäõÁöÑÊï∞ÊçÆÊîØÊíë„ÄÇ

---

*ÊñáÊ°£‰ΩúËÄÖÔºöÂºÄÂèëÂõ¢Èòü*  
*ÂàõÂª∫Êó∂Èó¥Ôºö2025-07-07*  
*ÊñáÊ°£ÁâàÊú¨Ôºö1.0*
